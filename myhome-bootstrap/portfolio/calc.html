<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>계산기</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/cals.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css">
</head>

<body>
    <!-- 헤더 -->
    <header>
        <a href="../index.html"><img src="../img/300.png" alt="logo"></a>
        <!-- /(루트)아래 myhome 디렉토리에 index.html을 연결 -->
    </header>
    <!-- 전역 메뉴 바 -->
    <ul class="gnb navbar navbar-dark bg-primary">
        <li><a href="../index.html"><i class="fas fa-home"></i> 홈</a></li>
        <li><a href="calc.html" class="active"><i class="fas fa-calculator"></i> 계산기</a></li>
        <li><a href="../board/list.html"><i class="fas fa-edit"></i> 유머글</a></li>
        <li><a href="../clock.html"><i class="fas fa-clock"></i> 시계</a></li>
    </ul>
    <div class="clearfix"></div>
    <!-- 컨텐츠 -->
    <section>
        <div class="calc">
            <div class="maker" id="show_explain"></div>
            <div class="disp" id="display"></div>
            <div class="btns">
                <a href="#" class="btn_numb" onclick="num('1')">1</a>
                <a href="#" class="btn_numb" onclick="num('2')">2</a>
                <a href="#" class="btn_numb" onclick="num('3')">3</a>
                <a href="#" class="btn_numb" onclick="num('4')">4</a>
                <a href="#" class="btn_numb" onclick="num('5')">5</a>
                <a href="#" class="btn_numb" onclick="num('6')">6</a>
                <a href="#" class="btn_numb" onclick="num('7')">7</a>
                <a href="#" class="btn_numb" onclick="num('8')">8</a>
                <a href="#" class="btn_numb" onclick="num('9')">9</a>
                <a href="#" class="btn_numb" onclick="num('0')">0</a>
                <a href="#" class="btn_sign" onmouseover="explain(this)" onmouseout="eraseDisplay()" id="plus"
                    onclick="num('+')">+</a>
                <a href="#" class="btn_sign" onmouseover="explain(this)" onmouseout="eraseDisplay()" id="minus"
                    onclick="num('-')">-</a>
                <a href="#" class="btn_sign" onmouseover="explain(this)" onmouseout="eraseDisplay()" id="times"
                    onclick="num('*')">*</a>
                <a href="#" class="btn_sign" onmouseover="explain(this)" onmouseout="eraseDisplay()" id="divide"
                    onclick="num('/')">/</a>
                <a href="#" class="btn_sign" onmouseover="explain(this)" onmouseout="eraseDisplay()" id="equal"
                    onclick="answer()">=</a>
                <a href="#" class="btn_sign" onmouseover="explain(this)" onmouseout="eraseDisplay()" id="Brace"
                    onclick="brace()">()</a>
                <a href="#" class="btn_sign" onmouseover="explain(this)" onmouseout="eraseDisplay()" id="dot"
                    onclick="num('.')">.</a>
                <a href="#" class="btn_sign" onmouseover="explain(this)" onmouseout="eraseDisplay()" id="erase"
                    onclick="erase()">←</a>
                <a href="#" class="btn_sign" onmouseover="explain(this)" onmouseout="eraseDisplay()" id="clear"
                    onclick="c()">C</a>
                <a href="#" class="btn_sign" onmouseover="explain(this)" onmouseout="eraseDisplay()" id="hist"
                    onclick="show_history()">H</a>
            </div>
        </div>
    </section>
    <!-- 풋터 -->
    <footer>경기도 수원시 장안구 정조로</footer>
    <script>
        var show_explain = document.getElementById("show_explain");
        function explain(param) {
            var el = param;
            if (el.id === "erase") {
                show_explain.innerHTML = "한 글자씩 삭제";
            } else if (el.id === "clear") {
                show_explain.innerHTML = "화면 초기화";
            } else if (el.id === "plus") {
                show_explain.innerHTML = "더하기";
            } else if (el.id === "times") {
                show_explain.innerHTML = "곱하기";
            } else if (el.id === "minus") {
                show_explain.innerHTML = "빼기";
            } else if (el.id === "divide") {
                show_explain.innerHTML = "나누기";
            } else if (el.id === "Brace") {
                show_explain.innerHTML = "괄호(열고 닫기 자동 변환)";
            } else if (el.id === "hist") {
                show_explain.innerHTML = "계산 기록 보기";
            } else if (el.id === "equal") {
                show_explain.innerHTML = "계산 결과";
            } else if (el.id === "dot") {
                show_explain.innerHTML = "소수점";
            }
        }
        function eraseDisplay() {
            document.getElementById("show_explain").innerHTML = "";
        }

        var display = document.getElementById("display");
        var duplicate_sign = '';
        var sign_before_num = 'yes';
        function num(input) {        // 숫자와 연산자를 입력 받음
            if (display.innerHTML === '') {
                sign_before_num = 'yes';
            }
            if (input === '*' || input === '+' || input === '/' || input === '-') {
                if (sign_before_num === 'yes') {
                    show_explain.innerHTML = "숫자 먼저 입력하세요";
                } else {
                    if (duplicate_sign === 'yes') {
                        show_explain.innerHTML = "기호 중복 입력";
                    } else {
                        show_explain.innerHTML = "두 줄까지 입력";
                        display.innerHTML += input;
                        duplicate_sign = 'yes';
                    }
                }
            } else {
                display.innerHTML += input;
                duplicate_sign = 'no';
                sign_before_num = 'no';
            }
        }
        function erase() {
            display.innerHTML = display.innerHTML.slice(0, -1);
            duplicate_sign = 'no';
            var last_char = display.innerHTML[display.innerHTML.length - 1];
            if (last_char === '*' || last_char === '/' || last_char === '+' || last_char === '-') {
                duplicate_sign = 'yes';
            }
        }
        function c() {
            display.innerHTML = '';
        }
        var hist = [];
        function answer() {
            if (Number(display.innerHTML[display.innerHTML.length - 1]) >= 0) {
                var answer = eval(display.textContent);
                display.innerHTML += '=' + answer;
                hist.push(display.innerHTML);
            }
        }
        function brace() {
            if (!isNaN(display.innerHTML[display.innerHTML.length - 1]) || display.innerHTML[display.innerHTML.length - 1] === ")") {
                display.innerHTML += ")";
            } else {
                display.innerHTML += "(";
            }
        }
        function show_history() {
            display.innerHTML = '';
            for (x of hist.entries()) {
                display.innerHTML += "<" + (Number(x[0]) + 1) + "번째 계산> <br>" + x[1] + '<br>';
            }
        }
    </script>
</body>

</html>